function afViewportSetup(i){if(null==document.getElementById(i.canvas))return!1;var o=document.getElementById(i.canvas).offsetWidth,n=parseFloat(o)-2*i.strokeSize,w=n/2,f=w/45;return window.afconfig.svgwidth=n,window.afconfig.svgCenter=window.afconfig.svgwidth/2,window.afconfig.svgheight=parseFloat(n),window.afconfig.svRadius=parseFloat(w),window.afconfig.svAnglePx=parseFloat(f.toFixed(2)),window.afconfig.svgMaxRadius=parseFloat((1.414*n/2).toFixed(2)),window.afconfig.svgDrawingPoints=[],window.afconfig.svgChart=[],window.afconfig.svgLastDrawingPointX=window.afconfig.svRadius,window.afconfig.svgLastDrawingPointY=0,window.afconfig.svgLastDrawingSide=1,window.afconfig.svgBackgroundColor=i.svgBackgroundColor,window.afconfig.lastangle=0,window.afconfig.svgStyles="",window.afconfig.circleRadius=i.mainCircleRadius,window.afconfig.complete=!1,window.afconfig.identity="c1",null!=window.afconfig.textCaptions&&(window.afconfig.textCaptions=window.afconfig.textCaptions),window.afconfig.lastangle=0,f}function afSetupSVGConfiguration(i){var o=Math.floor(window.afconfig.svgwidth);if(null==window.afconfig.svRadius)var n=Math.floor(.8*window.afconfig.svRadius*2);else n=Math.floor(window.afconfig.svRadius*window.afconfig.circleRadius*2);var w=Math.floor(parseFloat(o/2)),f=Math.floor(parseFloat(window.afconfig.svRadius*window.afconfig.circleRadius)),a=Math.floor(parseFloat(n)),g=Math.floor(a-2*i.strokeSize),e=(g/2).toFixed(2),s=e/45,t=w-f+(f-e);window.afconfig.svgBackgroundColor=window.afconfig.svgSecondCircleBackgroundColor,window.afconfig.svgwidth=g,window.afconfig.svgCenter=window.afconfig.svgwidth/2,window.afconfig.svgheight=parseFloat(g),window.afconfig.svRadius=parseFloat(e),window.afconfig.svAnglePx=parseFloat(s.toFixed(2)),window.afconfig.svgMaxRadius=parseFloat((1.414*g/2).toFixed(2)),window.afconfig.svgDrawingPoints=[],window.afconfig.svgChart=[],window.afconfig.svgLastDrawingPointX=window.afconfig.svRadius,window.afconfig.svgLastDrawingPointY=0,window.afconfig.svgLastDrawingSide=1,window.afconfig.svgBackgroundColor=i.svgSecondCircleBackgroundColor,window.afconfig.lastangle=0,window.afconfig.svgStyles="position:absolute;",window.afconfig.complete=!1,window.afconfig.identity="c2",window.afconfig.circleRadius=i.svgSecondCirclecircleRadius,t>0&&(window.afconfig.svgStyles+="top:"+t.toFixed(2)+"px;left:"+t.toFixed(2)+"px;"),window.afconfig.circleStrokeSize=i.svgSecondCircleStrokeSize}function afSVGStart(i=1){var o="";return null!=window.afconfig.svgStyles&&(o=window.afconfig.svgStyles),'<svg id="'+window.afconfig.identity+'px" width="'+window.afconfig.svgwidth+'px" height="'+window.afconfig.svgheight+'px" area-label="'+window.afconfig.title+'" style="overflow: hidden;border:none; border-radius:50%;background-color:#'+window.afconfig.svgBackgroundColor+";"+o+'">'}function afSVGEnd(i){return"</svg>"}function afGenerateSvgG(i){return i.join(" ")}function afDrawPath(i,o){var n=parseFloat(i[o][1])/window.afconfig.total*360,w=[],f=window.afconfig.strokeSize,a=window.afconfig.strokeSize,g=window.afconfig.lastangle+n,e=0;for(let i=0;i<window.afconfig.spliters.length;i++)window.afconfig.spliters[i]<=g&&e++;if(1==window.afconfig.complete)return"";var s=window.afconfig.svgLastDrawingPointX,t=window.afconfig.svgLastDrawingPointY,d=window.afconfig.svRadius;switch(!0){case s>=d&&0==t:window.afconfig.svgLastDrawingSide=1,f=0,a=-window.afconfig.strokeSize;break;case s>=window.afconfig.svgwidth&&t<=d:window.afconfig.svgLastDrawingSide=2,f=window.afconfig.strokeSize,a=0;break;case s>=window.afconfig.svgwidth&&t>d:window.afconfig.svgLastDrawingSide=3,f=window.afconfig.strokeSize,a=0;break;case s>=d&&t>=window.afconfig.svgheight:window.afconfig.svgLastDrawingSide=4,a=window.afconfig.strokeSize;break;case s>=0&&s<d&&t>=window.afconfig.svgheight:window.afconfig.svgLastDrawingSide=5,f=0,a=window.afconfig.strokeSize;break;case s>=0&&s<d&&t>=t>d:window.afconfig.svgLastDrawingSide=6,f=-window.afconfig.strokeSize,a=0;break;case s>=0&&s<d&&t>=0&&t<d:window.afconfig.svgLastDrawingSide=7,f=-window.afconfig.strokeSize,a=0;break;case s>=0&&s<d&&t>=0&&t<d:window.afconfig.svgLastDrawingSide=8,f=0,a=-window.afconfig.strokeSize}switch(window.afconfig.svgLastDrawingSide>6||window.afconfig.svgLastDrawingSide>7?(w.push("M"+window.afconfig.svgLastDrawingPointX+","+window.afconfig.svgLastDrawingPointY),w.push("M"+(window.afconfig.svgLastDrawingPointX+f)+","+(window.afconfig.svgLastDrawingPointY+a))):(w.push("M"+(window.afconfig.svgLastDrawingPointX+f)+","+(window.afconfig.svgLastDrawingPointY+a)),w.push("M"+window.afconfig.svgLastDrawingPointX+","+window.afconfig.svgLastDrawingPointY)),w.push("L"+window.afconfig.svgCenter+","+window.afconfig.svgCenter),e){case 8:if(g>=360){var c=window.afconfig.svgCenter;window.afconfig.complete=!0}else c=(g-315)*window.afconfig.svAnglePx;switch(w.push("L"+c+",0"),w.push("L"+c+","+(0-window.afconfig.strokeSize)),window.afconfig.svgLastDrawingPointX=Math.floor(c),window.afconfig.svgLastDrawingPointY=0,window.afconfig.svgLastDrawingSide){case 8:case 7:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize));break;case 6:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svRadius+window.afconfig.strokeSize));break;case 5:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 4:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 3:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 2:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 1:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+window.afconfig.svRadius),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=8;break;case 7:c=(g-315)*window.afconfig.svAnglePx;switch(w.push("L"+c+",0"),w.push("L"+c+","+(0-window.afconfig.strokeSize)),window.afconfig.svgLastDrawingPointX=Math.floor(c),window.afconfig.svgLastDrawingPointY=0,window.afconfig.svgLastDrawingSide){case 7:case 6:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize));break;case 5:case 4:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svRadius+window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 3:case 2:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 1:w.push("L"+(0-window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize)),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=7;break;case 6:var r=window.afconfig.svRadius-(g-270)*window.afconfig.svAnglePx;switch(w.push("L0,"+r),w.push("L"+(0-window.afconfig.strokeSize)+","+r),window.afconfig.svgLastDrawingPointX=0,window.afconfig.svgLastDrawingPointY=Math.floor(r),window.afconfig.svgLastDrawingSide){case 6:w.push("L"+(0-window.afconfig.strokeSize)+","+window.afconfig.svRadius);break;case 5:w.push("L"+(0-window.afconfig.strokeSize)+","+window.afconfig.svRadius),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 4:w.push("L"+(0-window.afconfig.strokeSize)+","+window.afconfig.svRadius),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 3:w.push("L"+(0-window.afconfig.strokeSize)+","+window.afconfig.svRadius),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 2:w.push("L"+(0-window.afconfig.strokeSize)+","+window.afconfig.svRadius),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+window.afconfig.svRadius);break;case 1:w.push("L"+(0-window.afconfig.strokeSize)+","+window.afconfig.svRadius),w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=6;break;case 5:r=window.afconfig.svgheight-(g-225)*window.afconfig.svAnglePx;switch(w.push("L0,"+r),w.push("L"+(0-window.afconfig.strokeSize)+","+r),window.afconfig.svgLastDrawingPointX=0,window.afconfig.svgLastDrawingPointY=Math.floor(r),window.afconfig.svgLastDrawingSide){case 5:case 4:w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 3:w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 2:w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+window.afconfig.svRadius);break;case 1:w.push("L"+(0-window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+window.afconfig.svRadius+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+window.afconfig.svRadius),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=5;break;case 4:c=afconfig.svgCenter-(g-180)*window.afconfig.svAnglePx;switch(w.push("L"+c+","+window.afconfig.svgheight),w.push("L"+(c+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),window.afconfig.svgLastDrawingPointX=Math.floor(c),window.afconfig.svgLastDrawingPointY=Math.floor(window.afconfig.svgheight),window.afconfig.svgLastDrawingSide){case 4:w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 3:case 2:w.push("L "+window.afconfig.svgwidth+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 1:w.push("L "+window.afconfig.svgwidth+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=4;break;case 3:c=afconfig.svgwidth-(g-135)*window.afconfig.svAnglePx;switch(w.push("L"+c+","+window.afconfig.svgheight),w.push("L"+(c+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),window.afconfig.svgheight,window.afconfig.svgLastDrawingPointX=Math.floor(c),window.afconfig.svgLastDrawingPointY=Math.floor(window.afconfig.svgheight),window.afconfig.svgLastDrawingSide){case 3:w.push("L "+window.afconfig.svgwidth+","+(window.afconfig.svgheight+window.afconfig.strokeSize));break;case 2:w.push("L "+window.afconfig.svgwidth+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+window.afconfig.svRadius);break;case 1:case 0:w.push("L "+window.afconfig.svgwidth+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svgheight+window.afconfig.strokeSize)),w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=3;break;case 2:r=(g-90)*window.afconfig.svAnglePx+window.afconfig.svRadius;switch(w.push("L"+window.afconfig.svgwidth+","+r),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+r),window.afconfig.svgLastDrawingPointX=Math.floor(window.afconfig.svgwidth),window.afconfig.svgLastDrawingPointY=Math.floor(r),window.afconfig.svgLastDrawingSide){case 2:w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svRadius+window.afconfig.strokeSize));break;case 1:w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(window.afconfig.svRadius+window.afconfig.strokeSize)),w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=2;break;case 1:r=(g-45)*window.afconfig.svAnglePx;switch(w.push("L"+window.afconfig.svgwidth+","+r),w.push("L"+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+r),window.afconfig.svgLastDrawingPointX=Math.floor(window.afconfig.svgwidth),window.afconfig.svgLastDrawingPointY=Math.floor(r),window.afconfig.svgLastDrawingSide){case 1:case 0:w.push("L "+(window.afconfig.svgwidth+window.afconfig.strokeSize)+","+(0-window.afconfig.strokeSize))}window.afconfig.svgLastDrawingSide=1;break;default:c=window.afconfig.svRadius+g*window.afconfig.svAnglePx;w.push("L"+c+","+window.afconfig.strokeSize),w.push("L"+c+",0"),window.afconfig.svgLastDrawingPointX=Math.floor(c),window.afconfig.svgLastDrawingPointY=0}window.afconfig.lastangle=window.afconfig.lastangle+n;var h=afGenerateSvgG(w),v=document.createElement("path");v.setAttribute("data-stepcount",o),v.setAttribute("d",h),v.setAttribute("fill","#"+i[o][2]),v.setAttribute("stroke-width",window.afconfig.strokeSize),v.setAttribute("stroke","#"+window.afconfig.strokeColor);var u=document.createElement("g");return u.setAttribute("class","svggrouppath"),u.setAttribute("data-groupid",window.afconfig.identity+"_"+o),u.setAttribute("id","pathgroup_"+window.afconfig.identity+"_"+o),u.innerHTML=v.outerHTML,u.outerHTML}function drawMarker(i,o){return'<div class="marker position_'+window.afconfig.svgLastDrawingSide+'" id="rec_'+window.afconfig.identity+"_"+i+'"><div>'+o+"</div></div>"}function afCalculateTotal(i){var o=0;for(let n=0;n<i.length;n++)o+=parseFloat(i[n][1]);return o}function afDrawCenter(){return null==window.afconfig.svRadius?radius=.8*window.afconfig.svRadius:radius=window.afconfig.svRadius*window.afconfig.circleRadius,'<circle cx="'+window.afconfig.svRadius+'" cy="'+window.afconfig.svRadius+'" stroke-width="'+window.afconfig.circleStrokeSize+'" stroke="#'+window.afconfig.strokeColor+'" fill="#'+window.afconfig.circleFillColor+'" r="'+radius+'" />'}function afDrawText(){var i="";if(null!=window.afconfig.textCaptions)for(let w=0;w<window.afconfig.textCaptions.length;w++){if(null!=window.afconfig.textCaptions[w].style)var o=window.afconfig.textCaptions[w].style;else o="";if(null!=window.afconfig.textCaptions[w].classes)var n=window.afconfig.textCaptions[w].classes;else n="";i+='<text id="svgtext_'+w+'" class="'+n+'" x="'+(null!=window.afconfig.textCaptions[w].x?window.afconfig.textCaptions[w].x:20)+'" y="'+(null!=window.afconfig.textCaptions[w].y?window.afconfig.textCaptions[w].y:120)+'" font-family="monospace" style="'+o+'" text-anchor="middle" >'+window.afconfig.textCaptions[w].title+"</text>"}return i}function afDrawPichart(i,o=[],n=[],w="gencal"){let f=i;""!=w&&(f.canvas=w),null==i.total&&(f.total=afCalculateTotal(o)),f.spliters=[46,91,136,181,226,271,316,359],f.lastangle=0,window.afconfig=f;var a=afViewportSetup(f);if(!a)return console.log("Incorrect pi-chart canvas"),!1;var g=afSVGStart(),e="";for(let i=0;i<o.length;i++)g+=afDrawPath(o,i),e+=drawMarker(i,o[i][3]);if(g+=afDrawCenter(),g+=afSVGEnd(),g+=e,e="",n.length>=0&&window.afconfig.secondCircle){afSetupSVGConfiguration(f),g+=afSVGStart(window.afconfig.circleRadius);for(let i=0;i<n.length;i++)g+=afDrawPath(n,i),e+=drawMarker(i,n[i][3]);g+=afDrawCenter(),null==f.disableDrawText&&(g+=afDrawText()),g+=afSVGEnd(),g+=e}if(null!=f.textContainer){var s=document.getElementById("generatortext").innerHTML;document.getElementById(f.canvas).innerHTML=g+s}else document.getElementById(f.canvas).innerHTML=g;a=afViewportSetup(f);for(let i=0;i<o.length;i++){var t=document.getElementById("pathgroup_"+window.afconfig.identity+"_"+i);null!=t&&(t.addEventListener("mouseover",(function(o){var n=document.getElementById("rec_"+window.afconfig.identity+"_"+i);null!=n&&n.classList.add("active")})),t.addEventListener("mouseout",(function(o){var n=document.getElementById("rec_"+window.afconfig.identity+"_"+i);null!=n&&n.classList.remove("active")})))}}